<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>HOST</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script src="/vendor/peer.min.js"></script>
  <script src="/vendor/helpers.js" type="module"></script>
  <script src="/vendor/b64.js"></script>
  <script src="https://lindseymysse.github.io/qr-code-element/qr-code.js" type="module"></script>
  <script src="https://lindseymysse.github.io/peer-component/peer-component.js" type="module"></script>
  <script src="/vendor/EYE.js" type="module"></script>

  <style>
    body {
      background-color: black;
      color: white;
      font-family: monospace;
    }

  </style>

</head>



<body>


<script>
  
  function getURLValues(URL = window.location.href ){
    const search_params = new URLSearchParams(URL)
    let options = {}
    for (const [key, unparsed_value] of search_params) {
      if(key !== window.location.origin + window.location.pathname + '?' ){
        try {
          const value = JSON.parse(decodeURI(unparsed_value))
          options[key] = value
        } catch {
          options[key] = decodeURI(unparsed_value)
        }
      }
    }
    return options
  }

  const options = getURLValues()
  if(options['target-id']){
    const new_peer = document.createElement('peer-component')
    new_peer.setAttribute('target-id', options['target-id'])
    document.body.prepend(new_peer)
  }


</script>
</body>
</html>
